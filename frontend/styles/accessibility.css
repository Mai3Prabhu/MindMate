/**
 * Accessibility Styles for MindMate
 * WCAG 2.1 AA Compliant
 */

/* Screen Reader Only - Visually Hidden but Accessible */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Focus Indicators - WCAG 2.1 AA Compliant (3:1 contrast ratio) */
*:focus-visible {
  outline: 2px solid #7C3AED;
  outline-offset: 2px;
  border-radius: 4px;
}

/* High Contrast Focus for Dark Mode */
.dark *:focus-visible {
  outline-color: #A78BFA;
}

/* Skip Link Styles */
a[href="#main-content"] {
  position: absolute;
  left: -9999px;
  z-index: 999;
  padding: 1rem 1.5rem;
  background-color: #7C3AED;
  color: white;
  text-decoration: none;
  border-radius: 0.5rem;
  font-weight: 600;
}

a[href="#main-content"]:focus {
  left: 1rem;
  top: 1rem;
  outline: 2px solid #A78BFA;
  outline-offset: 2px;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  * {
    border-width: 2px !important;
  }
  
  button,
  a,
  input,
  select,
  textarea {
    border: 2px solid currentColor !important;
  }
}

/* Color Contrast - Light Mode (WCAG AA Compliant) */
:root {
  --text-primary: #1A1A1A;        /* 16.5:1 on white */
  --text-secondary: #4A4A4A;      /* 9.7:1 on white */
  --text-tertiary: #6B7280;       /* 5.5:1 on white */
  --brand-primary: #7C3AED;       /* 4.5:1 on white */
  --brand-dark: #5B21B6;          /* 7:1 on white */
  --success: #059669;             /* 4.5:1 on white */
  --error: #DC2626;               /* 5.9:1 on white */
  --warning: #D97706;             /* 4.5:1 on white */
  --info: #0284C7;                /* 4.5:1 on white */
}

/* Color Contrast - Dark Mode (WCAG AA Compliant) */
.dark {
  --text-primary: #FFFFFF;        /* 21:1 on #1A1A1A */
  --text-secondary: #D0D0D0;      /* 12.6:1 on #1A1A1A */
  --text-tertiary: #A0A0A0;       /* 7.5:1 on #1A1A1A */
  --brand-primary: #A78BFA;       /* 7:1 on #1A1A1A */
  --brand-dark: #C4B5FD;          /* 10:1 on #1A1A1A */
  --success: #34D399;             /* 7:1 on #1A1A1A */
  --error: #F87171;               /* 5.5:1 on #1A1A1A */
  --warning: #FBBF24;             /* 10:1 on #1A1A1A */
  --info: #38BDF8;                /* 7:1 on #1A1A1A */
}

/* Accessible Button States */
button:disabled,
button[aria-disabled="true"] {
  opacity: 0.5;
  cursor: not-allowed;
}

button:focus-visible,
a:focus-visible {
  outline: 2px solid var(--brand-primary);
  outline-offset: 2px;
}

/* Accessible Form Elements */
input:focus,
select:focus,
textarea:focus {
  outline: 2px solid var(--brand-primary);
  outline-offset: 2px;
  border-color: var(--brand-primary);
}

input[aria-invalid="true"],
select[aria-invalid="true"],
textarea[aria-invalid="true"] {
  border-color: var(--error);
  outline-color: var(--error);
}

/* Accessible Links */
a {
  text-decoration-skip-ink: auto;
}

a:focus-visible {
  outline: 2px solid var(--brand-primary);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Accessible Tables */
table {
  border-collapse: collapse;
}

th {
  text-align: left;
  font-weight: 600;
}

/* Accessible Lists */
ul[role="list"],
ol[role="list"] {
  list-style: none;
  padding: 0;
}

/* Live Region Styles */
[aria-live] {
  position: relative;
}

/* Loading States */
[aria-busy="true"] {
  cursor: wait;
  opacity: 0.7;
}

/* Modal/Dialog Accessibility */
[role="dialog"],
[role="alertdialog"] {
  position: fixed;
  z-index: 50;
}

/* Tooltip Accessibility */
[role="tooltip"] {
  position: absolute;
  z-index: 100;
  padding: 0.5rem 0.75rem;
  background-color: var(--text-primary);
  color: white;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  pointer-events: none;
}

/* Keyboard Navigation Indicators */
.keyboard-user *:focus {
  outline: 2px solid var(--brand-primary);
  outline-offset: 2px;
}

/* Touch Target Size - Minimum 44x44px for WCAG AAA */
button,
a,
input[type="checkbox"],
input[type="radio"],
select {
  min-height: 44px;
  min-width: 44px;
}

/* Exception for inline text links */
a:not([role="button"]) {
  min-height: auto;
  min-width: auto;
}

/* Accessible Error Messages */
.error-message {
  color: var(--error);
  font-size: 0.875rem;
  margin-top: 0.25rem;
}

/* Accessible Success Messages */
.success-message {
  color: var(--success);
  font-size: 0.875rem;
  margin-top: 0.25rem;
}

/* Accessible Warning Messages */
.warning-message {
  color: var(--warning);
  font-size: 0.875rem;
  margin-top: 0.25rem;
}

/* Required Field Indicator */
.required::after {
  content: " *";
  color: var(--error);
  font-weight: bold;
}

/* Visually Hidden but Accessible Labels */
label.sr-only + input,
label.sr-only + select,
label.sr-only + textarea {
  margin-top: 0;
}

/* Accessible Progress Bars */
[role="progressbar"] {
  position: relative;
  overflow: hidden;
  background-color: #E5E7EB;
  border-radius: 9999px;
}

.dark [role="progressbar"] {
  background-color: #374151;
}

/* Accessible Status Indicators */
[role="status"] {
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
}

/* Accessible Alerts */
[role="alert"] {
  padding: 1rem;
  border-radius: 0.5rem;
  border-left: 4px solid;
  font-weight: 500;
}

[role="alert"].error {
  background-color: #FEE2E2;
  border-color: var(--error);
  color: #991B1B;
}

.dark [role="alert"].error {
  background-color: #7F1D1D;
  color: #FCA5A5;
}

[role="alert"].success {
  background-color: #D1FAE5;
  border-color: var(--success);
  color: #065F46;
}

.dark [role="alert"].success {
  background-color: #064E3B;
  color: #6EE7B7;
}

[role="alert"].warning {
  background-color: #FEF3C7;
  border-color: var(--warning);
  color: #92400E;
}

.dark [role="alert"].warning {
  background-color: #78350F;
  color: #FCD34D;
}

/* Accessible Tabs */
[role="tablist"] {
  display: flex;
  border-bottom: 2px solid #E5E7EB;
}

.dark [role="tablist"] {
  border-bottom-color: #374151;
}

[role="tab"] {
  padding: 0.75rem 1.5rem;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: all 0.2s;
}

[role="tab"]:hover {
  background-color: #F3F4F6;
}

.dark [role="tab"]:hover {
  background-color: #1F2937;
}

[role="tab"][aria-selected="true"] {
  border-bottom-color: var(--brand-primary);
  color: var(--brand-primary);
  font-weight: 600;
}

[role="tabpanel"] {
  padding: 1.5rem;
}

[role="tabpanel"]:focus {
  outline: 2px solid var(--brand-primary);
  outline-offset: 2px;
}

/* Accessible Accordions */
[role="button"][aria-expanded] {
  cursor: pointer;
}

/* Accessible Menus */
[role="menu"],
[role="menubar"] {
  list-style: none;
  padding: 0;
  margin: 0;
}

[role="menuitem"],
[role="menuitemcheckbox"],
[role="menuitemradio"] {
  cursor: pointer;
  padding: 0.5rem 1rem;
}

[role="menuitem"]:hover,
[role="menuitemcheckbox"]:hover,
[role="menuitemradio"]:hover {
  background-color: #F3F4F6;
}

.dark [role="menuitem"]:hover,
.dark [role="menuitemcheckbox"]:hover,
.dark [role="menuitemradio"]:hover {
  background-color: #1F2937;
}

/* Print Styles - Accessibility */
@media print {
  *:focus {
    outline: none !important;
  }
  
  a[href]::after {
    content: " (" attr(href) ")";
  }
  
  abbr[title]::after {
    content: " (" attr(title) ")";
  }
}

/* Forced Colors Mode Support (Windows High Contrast) */
@media (forced-colors: active) {
  * {
    forced-color-adjust: auto;
  }
  
  button,
  a {
    border: 1px solid;
  }
}
